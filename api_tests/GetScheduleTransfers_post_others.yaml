# Test generated by RoostGPT for test gpt-turbo-artill-korebank using AI Type Open AI and AI Model gpt-4-1106-preview

# RoostTestHash=7b4d2d87f9

config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "/mnt/data/GetScheduleTransfers_post_others.csv"
    fields:
      - "customerId"
      - "status"
    skipHeader: true
  plugins:
    expect: {}

scenarios:
  - name: "GetScheduleTransfers negative test scenarios"
    flow:
      # Expect authorization failure with invalid auth token
      - log: "Authorisation failure due to invalid auth token"
      - think: 1
      - post:
          url: "/GetScheduleTransfers"
          headers:
            Authorization: "Invalid {{ $processEnvironment.AUTH_TOKEN }}"
            botId: "bot123"
            accountId: "account456"
          expect:
            - statusCode: 401
            - hasProperty: 'err'
            - hasProperty: 'err.message'
            - equals: { err.message: "Authorization has been denied for this request." }

      # Expect a 404 not found error due to incorrect URL
      - log: "404 Error due to incorrect URL"
      - think: 1
      - post:
          url: "/InvalidGetScheduleTransfers"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            botId: "bot123"
            accountId: "account456"
          json:
            customerId: "{{ customerId }}"
            status: "{{ status }}"
          expect:
            - statusCode: 404
            - hasProperty: 'err'
            - hasProperty: 'err.message'
            - equals: { err.message: "Not Found" }

      # Expect a 404 not found error when required headers are missing
      - log: "404 Error due to missing required headers"
      - think: 1
      - post:
          url: "/GetScheduleTransfers"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          json:
            customerId: "{{ customerId }}"
            status: "{{ status }}"
          expect:
            - statusCode: 404
            - hasProperty: 'err'
            - hasProperty: 'err.message'
            - equals: { err.message: "Required headers are missing." }

