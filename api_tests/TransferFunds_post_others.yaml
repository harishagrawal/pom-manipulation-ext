# Test generated by RoostGPT for test gpt-turbo-artill-korebank using AI Type Open AI and AI Model gpt-4-1106-preview

# RoostTestHash=289ed66c26

config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "/mnt/data/TransferFunds_post_others.csv"
    fields:
      - "invalidAuthorization"
      - "emptyAuthorization"
      - "invalidAccountId"
      - "emptyAccountId"
      - "invalidRequestBody"
    skipHeader: true
  plugins:
    expect: {}

scenarios:
  - name: "Transfer Funds API - Negative Tests"
    flow:
      - log: "Testing with missing header fields"
      - post:
          url: "/TransferFunds"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            accountId: "{{ emptyAccountId }}"  # Assuming empty string is used to simulate missing accountId
            koreUserId: ""
            botId: "test-bot-id"
            userCode: "test-user-code"
          json:
            customerId: 1045300
            amount: 3
            currency: "USD"
            sourceAccountId: "1042345"
            targetAccountId: "1042222"
            date: "03-15-2021"
            TransactionType: "1063"
            PaymentType: "Minimum Payment"
          expect:
            - statusCode: 401
              headers: { 'Content-Type': 'application/json' }
              responseBody: { err: { message: "Authorization failed" } }
          # Expected behavior: Request should fail due to missing required header (accountId)

      - think: 1

      - log: "Testing with invalid Authorization token"
      - post:
          url: "/TransferFunds"
          headers:
            Authorization: "{{ invalidAuthorization }}"
            accountId: "test-account-id"
            koreUserId: "test-user-id"
            botId: "test-bot-id"
            userCode: "test-user-code"
          json:
            customerId: 1045300
            amount: 3
            currency: "USD"
            sourceAccountId: "1042345"
            targetAccountId: "1042222"
            date: "03-15-2021"
            description: "Incorrect payment"
            TransactionType: "1063"
            PaymentType: "Additional Payment"
          expect:
            - statusCode: 401
              headers: { 'Content-Type': 'application/json' }
              responseBody: { err: { message: "Authorization failed" } }
          # Expected behavior: Request should fail due to invalid Authorization token

      - think: 1

      - log: "Testing with invalid URL to test validation failure"
      - post:
          url: "/TranferFundz"  # Invalid URL
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            accountId: "test-account-id"
            koreUserId: "test-user-id"
            botId: "test-bot-id"
            userCode: "test-user-code"
          json:
            customerId: 1045300
            amount: 3
            currency: "USD"
            sourceAccountId: "1042345"
            targetAccountId: "1042222"
            date: "03-15-2021"
            description: "Internal Transfer"
            TransactionType: "1063"
            PaymentType: "Minimum Payment"
          expect:
            - statusCode: 404
              headers: { 'Content-Type': 'application/json' }
              responseBody: { err: { message: "Not Found" } }
          # Expected behavior: Request should fail because the URL is invalid

      - think: 1

      - log: "Testing with empty body to simulate missing required requestBody fields"
      - post:
          url: "/TransferFunds"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            accountId: "test-account-id"
            koreUserId: "test-user-id"
            botId: "test-bot-id"
            userCode: "test-user-code"
          json:
            customerId: ""
            amount: ""
            currency: ""
            sourceAccountId: ""
            targetAccountId: ""
            date: ""
            description: ""
            TransactionType: ""
            PaymentType: ""
          expect:
            - statusCode: 400
              headers: { 'Content-Type': 'application/json' }
          # Expected behavior: Request should fail because required requestBody fields are missing

      - think: 1

      - log: "Testing with malformed request body as an error case"
      - post:
          url: "/TransferFunds"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            accountId: "test-account-id"
            koreUserId: "test-user-id"
            botId: "test-bot-id"
            userCode: "test-user-code"
          json: "{{ invalidRequestBody }}"
          expect:
            - statusCode: 400
              headers: { 'Content-Type': 'application/json' }
          # Expected behavior: Request should fail due to malformed request body

